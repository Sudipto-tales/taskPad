<!-- Vendor JS -->
 {% load static %}

<script src="{% static 'assets/js/vendor.min.js' %}"></script>
<script src="{% static 'assets/vendor/chart.js/chart.min.js' %}"></script>
<script src="{% static 'assets/js/pages/demo.profile.js' %}"></script>
<script src="{% static 'assets/js/app.min.js' %}"></script>
<script>
  $(document).on('submit', '#generic-modal-form', function (e) {
    e.preventDefault();

    const $form = $(this);
    const url = $form.data('url');
    const formData = $form.serialize();

    $.ajax({
      url: url,
      type: 'POST',
      data: formData,
      headers: {
        'X-CSRFToken': $('input[name="csrfmiddlewaretoken"]').val(),
      },
      success: function (response) {
        // ✅ Success Handler
        alert(response.message || "Operation successful.");
        $('#generic-modal-form').closest('.modal').modal('hide');
        location.reload(); // Or update DOM without reload
      },
      error: function (xhr) {
        // ❌ Error Handler
        alert("Something went wrong.");
        console.log(xhr.responseText);
      }
    });
  });
</script>
